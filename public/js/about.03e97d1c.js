(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"18af":function(t,s,e){},"591a":function(t,s,e){"use strict";var a=e("18af"),i=e.n(a);i.a},a120:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"mailPage"},[e("b-container",[e("b-row",{staticClass:"justify-content-md-center"},[e("b-col",{staticClass:"padding0",attrs:{md:"10"}},[e("div",{staticClass:"mailBody"},[e("div",[e("b-form-textarea",{attrs:{id:"textarea-rows",placeholder:"请留下你想说的话吧",rows:"7"},model:{value:t.firstText,callback:function(s){t.firstText=s},expression:"firstText"}}),e("div",{staticClass:"btns"},[e("b-button",{attrs:{variant:"success"},on:{click:t.subFirst}},[t._v("确定")]),e("b-button",{on:{click:function(s){t.firstText=""}}},[t._v("重置")])],1)],1),e("b-container",{attrs:{fluid:""}},[e("b-row",{attrs:{"align-v":"center"}},[e("b-col",{staticClass:"myCols4",attrs:{cols:"4"}},[t._v("留言("),e("span",{domProps:{textContent:t._s(t.paging.total)}}),t._v(")")]),e("b-col",{staticClass:"myCols8",attrs:{cols:"8"}},[e("b-pagination",{attrs:{"total-rows":t.paging.total,size:"sm",align:"right"},on:{change:t.changePage},model:{value:t.paging.currentPage,callback:function(s){t.$set(t.paging,"currentPage",s)},expression:"paging.currentPage"}})],1)],1)],1),t._l(t.msgList,(function(s,a){return e("div",{key:a,staticClass:"oneMsg"},[e("b-container",{attrs:{fluid:""}},[e("b-row",[e("div",{staticClass:"headImg"},[s.headImg?e("b-img",{attrs:{src:s.headImg,fluid:""}}):e("i",{staticClass:"iconfont icon-yonghu-tianchong"})],1),e("b-col",[e("div",{staticClass:"nickStyle"},[t._v(t._s(s.userName)),e("span",{domProps:{textContent:t._s(s.uploadTime)}})]),e("div",{domProps:{textContent:t._s(s.message)}}),e("div",{staticClass:"otherOps"},[e("i",{staticClass:"iconfont icon-dianzan",on:{click:function(e){return t.isLike(s.id)}}}),e("span",{domProps:{textContent:t._s("("+s.goods+")")}}),e("i",{staticClass:"iconfont icon-message",on:{click:function(t){s.showTextarea=!0}}})])])],1),s.children.length>0?e("b-row",[e("b-col",[e("div",{staticClass:"reply"},[e("b-container",{attrs:{fluid:""}},t._l(s.children,(function(s,a){return e("b-row",{key:a,staticClass:"marginBot10"},[e("div",{staticClass:"headImg"},[s.headImg?e("b-img",{attrs:{src:s.headImg,fluid:""}}):e("i",{staticClass:"iconfont icon-yonghu-tianchong"})],1),e("b-col",[e("div",{staticClass:"replyNick"},[t._v(t._s(s.userName)),e("span",{domProps:{textContent:t._s(s.uploadTime)}})]),e("div",{domProps:{textContent:t._s(s.message)}})])],1)})),1)],1)])],1):t._e(),e("b-row",[e("b-col",[e("div",{directives:[{name:"show",rawName:"v-show",value:s.showTextarea,expression:"item.showTextarea"}],staticClass:"longText"},[e("b-form-textarea",{attrs:{id:"textarea",placeholder:"请输入"},model:{value:s.text,callback:function(e){t.$set(s,"text",e)},expression:"item.text"}}),e("div",{staticClass:"btns"},[e("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.yes(s)}}},[t._v("确定")]),e("b-button",{on:{click:function(t){s.showTextarea=!1}}},[t._v("取消")])],1)],1)])],1)],1)],1)}))],2)])],1)],1),e("b-modal",{attrs:{id:"my-modal","hide-footer":"",size:"sm",title:"提示"}},[e("div",{staticClass:"d-block text-center"},[e("p",[t._v("您还没有登录,是否先去登录?")])]),e("div",{staticClass:"bvModalBtn",staticStyle:{"text-align":"right"}},[e("b-button",{attrs:{variant:"success"},on:{click:function(s){return t.$router.push({path:"/login"})}}},[t._v("确定")]),e("b-button",{on:{click:function(s){return t.$bvModal.hide("my-modal")}}},[t._v("取消")])],1)])],1)},i=[],o=e("8039"),n={name:"index",data:function(){return{msgList:[],text:"",firstText:"",isBack:!0,waitSub:!0,paging:{total:0,nums:10,currentPage:1}}},created:function(){this.queryMsg()},methods:{queryMsg:function(){var t=this;Object(o["i"])(this.paging).then((function(s){if(s.succ){t.paging.total=s.data.total,t.paging.nums=s.data.nums,t.paging.currentPage=s.data.currentPage;var e=[],a=!0,i=!1,o=void 0;try{for(var n,r=s.data.backInfo[Symbol.iterator]();!(a=(n=r.next()).done);a=!0){var c=n.value;c.showTextarea=!1,e.push(c)}}catch(l){i=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}t.msgList=e}}))},addreply:function(t){var s=this;Object(o["b"])(t).then((function(t){if(t.succ)s.queryMsg(),s.$bvToast.toast("留言成功!",{title:"提示",autoHideDelay:3e3});else if(s.$bvToast.toast(t.errMsg,{title:"留言失败",autoHideDelay:3e3}),666==t.errCode){var e=s;setTimeout((function(){e.$router.push({path:"/login"})}),2e3)}}))},yes:function(t){if(this.$store.state.user.userId){if(""==t.text)return void this.$bvToast.toast("请先留下你的笔墨..",{title:"提示",autoHideDelay:3e3});var s={userId:this.$store.state.user.userId,message:t.text,uploadTime:this.getTime(),parentId:t.id};this.addreply(s)}else this.$bvModal.show("my-modal")},changePage:function(t){this.paging.currentPage!=t&&(this.paging.currentPage=t,this.queryMsg())},isLike:function(t){var s=this;if(this.$store.state.user.userId)if(this.isBack){this.isBack=!1;var e={userId:this.$store.state.user.userId,msgId:t};Object(o["g"])(e).then((function(t){if(t.succ)s.queryMsg();else if(s.$bvToast.toast(t.errMsg,{title:"点赞失败",autoHideDelay:3e3}),666==t.errCode){var e=s;setTimeout((function(){e.$router.push({path:"/login"})}),2e3)}s.isBack=!0}))}else this.$bvToast.toast("请勿重复点击",{title:"提示",autoHideDelay:3e3});else this.$bvModal.show("my-modal")},subFirst:function(){var t=this;if(this.waitSub)if(this.waitSub=!1,setTimeout((function(){t.waitSub=!0}),18e4),this.$store.state.user.userId){if(""==this.firstText)return void this.$bvToast.toast("请先留下你的笔墨..",{title:"提示",autoHideDelay:3e3});var s={userId:this.$store.state.user.userId,message:this.firstText,uploadTime:this.getTime(),parentId:"0"};this.addreply(s)}else this.$bvModal.show("my-modal");else this.$bvToast.toast("请勿频繁留言!",{title:"提示",autoHideDelay:3e3})}}},r=n,c=(e("591a"),e("2877")),l=Object(c["a"])(r,a,i,!1,null,"147f0eff",null);s["default"]=l.exports}}]);
//# sourceMappingURL=about.03e97d1c.js.map